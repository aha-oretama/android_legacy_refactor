# 次のリファクタ

* プロダクションコード：[LegacyCode.java](https://github.com/aha-oretama/android_legacy_refactor/blob/04-wrap-and-visible/app/src/main/java/cc/peaks/androidtestingbible/legacy/LegacyCode.java)
* テストコード：[LegacyCodeTest.kt](https://github.com/aha-oretama/android_legacy_refactor/blob/04-wrap-and-visible/app/src/test/java/cc/peaks/androidtestingbible/legacy/LegacyCodeTest.kt)

この変更で十分よくなったが、`@VisibleForTesting`アノテーションをつけているとはいえ、フィールドやメソッドのアクセス権をパッケージプライベートにしてテストクラスで強制的にオーバーライドするのは少々強引だろう。
アクセス権をprivateにしたままスタブに差し替えるには、Mockitoのorg.mockit.InjectMocksアノテーションを利用できる。
そのようにリファクタしてみましょう。

* [Next](https://github.com/aha-oretama/android_legacy_refactor/blob/05-injectmocks/05.md)
